import {
  page_default
} from "./chunk-B6FEF6NU.js";
import {
  DuplicateButton,
  GroupButton,
  PositionPicker,
  RemoveButton,
  TextAiWrite,
  extendToolbar,
  useCopyStyle,
  useDuplicateElement,
  useLock,
  useRemoveElement
} from "./chunk-XHG2TEJL.js";
import {
  Html
} from "./chunk-UTIUZPEP.js";
import {
  Button,
  ChevronDown,
  ChevronUp,
  ContextMenuPopover,
  DoubleChevronDown,
  DoubleChevronUp,
  Duplicate,
  Insert,
  Layers,
  Lock,
  Menu,
  MenuDivider,
  MenuItem,
  Navbar,
  NavbarGroup,
  Tooltip,
  Trash,
  Unlock,
  h,
  observer,
  t
} from "./chunk-SBOD4ZMK.js";
import {
  forEveryChild,
  unitToPx
} from "./chunk-GDHZJU5W.js";
import {
  getTotalClientRect
} from "./chunk-R75DDQOF.js";
import {
  autorun
} from "./chunk-TBUMKKT5.js";
import {
  require_react
} from "./chunk-RA4EGHW6.js";
import {
  __toESM
} from "./chunk-2LSFTFF7.js";

// node_modules/polotno/canvas/workspace.js
var import_react7 = __toESM(require_react());

// node_modules/polotno/canvas/workspace-canvas.js
var import_react3 = __toESM(require_react(), 1);

// node_modules/polotno/canvas/rules.js
var import_react = __toESM(require_react(), 1);
var l = h("div", import_react.default.forwardRef)`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
`;
var n = h("div", import_react.default.forwardRef)`
  height: 14px;
  position: sticky;
  font-size: 8px;
  line-height: 14px;
  top: 0;
  left: 0;
  color: grey;
  border-bottom: 1px solid grey;
  background-color: #e8e8e8;
  overflow: hidden;
`;
var a = h("div", import_react.default.forwardRef)`
  left: 0;
  width: 14px;
  position: sticky;
  font-size: 8px;
  line-height: 14px;
  color: grey;
  border-right: 1px solid grey;
  background-color: #e8e8e8;
  overflow: hidden;
`;
var s = h("div", import_react.default.forwardRef)`
  position: absolute;
  border-left: 1px solid grey;
  padding-left: 2px;
`;
var d = h("div", import_react.default.forwardRef)`
  position: absolute;
  left: 14px;
  border-left: 1px solid grey;
  padding-left: 2px;
  transform: rotate(90deg);
  transform-origin: left top;
  overflow: hidden;
`;
var p = [0.1, 0.2, 0.5, 1, 2, 5, 10, 20, 25, 50, 100, 200, 500, 1e3, 2e3, 5e3, 1e4];
var TopRules = observer(({ store: r2, width: i2, height: c2 }) => {
  const u = import_react.default.useRef(null);
  if (!r2.activePage) {
    return null;
  }
  const h2 = r2.activePage, f2 = (r2.bleedVisible && h2.bleed, h2.computedWidth * r2.scale), g = h2.computedHeight * r2.scale, m2 = (i2 - f2) / 2, x = (b = (e6) => unitToPx({ unitVal: e6, dpi: r2.dpi, unit: r2.unit }) * r2.scale, p.find((e6) => b(e6) > 30) || 1e4);
  var b;
  const y = unitToPx({ unitVal: x, dpi: r2.dpi, unit: r2.unit }) * r2.scale, v = Math.round(f2 / y) + 1, w = Math.round(g / y) + 1, k = getTotalClientRect(r2.selectedShapes);
  return import_react.default.createElement(l, { ref: u, className: "polotno-rulers" }, import_react.default.createElement(n, { style: { width: i2 + "px" }, className: "polotno-x-ruler" }, [...Array(v)].map((t3, o3) => import_react.default.createElement(s, { key: o3, style: { left: m2 + o3 * y + "px", width: y + "px" } }, "px" === r2.unit || x >= 1 ? Math.round(x * o3) : (x * o3).toFixed(1))), !!r2.selectedShapes.length && import_react.default.createElement("div", { style: { position: "absolute", left: m2 + k.x * r2.scale + "px", height: "14px", width: k.width * r2.scale, backgroundColor: "rgba(0,0,0,0.15)" } })), r2.pages.map((t3, o3) => {
    var i3;
    const l4 = t3.computedHeight * r2.scale, n2 = (c2 - l4) / 2;
    return import_react.default.createElement(a, { key: t3.id, style: { height: c2 - 14 + "px" }, className: "polotno-y-ruler" }, [...Array(w)].map((t4, o4) => import_react.default.createElement(d, { key: o4, style: { top: n2 + o4 * y - 14 + "px", width: y + "px" } }, "px" === r2.unit || x >= 1 ? Math.round(x * o4) : (x * o4).toFixed(1))), (null === (i3 = r2.selectedShapes[0]) || void 0 === i3 ? void 0 : i3.page) === t3 && import_react.default.createElement("div", { style: { position: "absolute", top: n2 + k.y * r2.scale - 14 + "px", width: "14px", height: k.height * r2.scale, backgroundColor: "rgba(0,0,0,0.15)" } }));
  }));
});

// node_modules/polotno/canvas/audio.js
var import_react2 = __toESM(require_react(), 1);
var AudioElement = observer(({ audio: t3, store: r2 }) => {
  const [i2, o3] = function(t4) {
    const [n2, r3] = import_react2.default.useState(null), [i3, o4] = import_react2.default.useState("loading");
    return import_react2.default.useEffect(() => {
      const e6 = new Audio(t4), n3 = () => {
        o4("loaded"), r3(e6);
      }, i4 = () => {
        o4("failed"), r3(null);
      };
      return e6.addEventListener("canplay", n3), e6.addEventListener("error", i4), () => {
        e6.removeEventListener("canplay", n3), e6.removeEventListener("error", i4);
      };
    }, [t4]), [n2, i3];
  }(t3.src);
  return import_react2.default.useEffect(() => {
    i2 && r2.history.ignore(() => {
      t3.set({ duration: 1e3 * i2.duration });
    });
  }, [i2, t3, r2.history]), import_react2.default.useEffect(() => {
    if (!i2) {
      return;
    }
    const e6 = () => {
      i2.currentTime = t3.startTime * t3.duration / 1e3;
    }, o4 = () => {
      const e7 = t3.endTime * t3.duration / 1e3;
      i2.currentTime >= e7 && (i2.pause(), i2.currentTime = t3.startTime * t3.duration / 1e3);
    };
    i2.addEventListener("ended", e6), i2.addEventListener("timeupdate", o4);
    const s3 = autorun(() => {
      const e7 = r2.animatedElementsIds;
      if (e7.length && !e7.includes(t3.id)) {
        return;
      }
      const n2 = r2.currentTime - t3.delay, o5 = t3.duration * (t3.endTime - t3.startTime), s4 = n2 >= 0 && n2 < o5;
      if (!r2.isPlaying || 0 !== r2.animatedElementsIds.length || !s4) {
        return void i2.pause();
      }
      i2.volume = t3.volume, i2.paused && i2.play();
      const a3 = n2 % o5 / 1e3 + t3.startTime * t3.duration / 1e3, u = i2.currentTime;
      Math.abs(u - a3) > 0.5 && a3 !== u && (i2.currentTime = a3);
    });
    return () => {
      i2.pause(), i2.removeEventListener("ended", e6), i2.removeEventListener("timeupdate", o4), s3();
    };
  }, [r2.isPlaying, t3.startTime, t3.endTime, t3.volume, i2]), null;
});

// node_modules/polotno/utils/clipboard.js
var a2 = { data: [], pageId: "" };
var o = "polotno_clipboard";
var l2 = (e6, t3) => {
  a2 = { data: JSON.parse(JSON.stringify(e6)), pageId: t3 };
  try {
    localStorage.setItem(o, JSON.stringify(e6)), localStorage.setItem(o + "_page", t3);
  } catch (l4) {
  }
};
var i = () => {
  try {
    const e6 = localStorage.getItem(o), t3 = localStorage.getItem(o + "_page");
    if (e6) {
      return { data: JSON.parse(e6), pageId: t3 };
    }
  } catch (e6) {
  }
  return a2;
};
var copy = (e6) => {
  var t3;
  0 !== e6.selectedElements.length && l2(e6.selectedElements.map((e7) => e7.toJSON()), null === (t3 = e6.activePage) || void 0 === t3 ? void 0 : t3.id);
};
var cut = (e6) => {
  var t3;
  l2(e6.selectedElements.map((e7) => e7.toJSON()), null === (t3 = e6.activePage) || void 0 === t3 ? void 0 : t3.id);
  let a3 = e6.selectedElements.filter((e7) => e7.removable).map((e7) => e7.id);
  e6.deleteElements(a3);
};
var paste = (a3) => {
  a3.history.transaction(() => {
    var o3, d2;
    let r2 = 0, s3 = 0;
    const { data: c2, pageId: n2 } = i();
    if (n2 === (null === (o3 = a3.activePage) || void 0 === o3 ? void 0 : o3.id)) {
      r2 = a3.width / 20, s3 = a3.height / 20;
    } else {
      const o4 = [];
      forEveryChild({ children: c2 }, (e6) => {
        "group" !== e6.type && o4.push(e6);
      });
      const l4 = getTotalClientRect(o4);
      l4.maxX > a3.width && (r2 = -l4.minX), l4.maxY > a3.height && (s3 = -l4.minY);
    }
    const p2 = [];
    forEveryChild({ children: c2 }, (e6) => {
      delete e6.id, "group" !== e6.type && (e6.x += r2, e6.y += s3);
    }), c2.forEach((e6) => {
      var t3;
      const o4 = null === (t3 = a3.activePage) || void 0 === t3 ? void 0 : t3.addElement(e6);
      o4 && p2.push(o4.id);
    }), l2(c2, null === (d2 = a3.activePage) || void 0 === d2 ? void 0 : d2.id), a3.selectElements(p2);
  });
};

// node_modules/polotno/canvas/hotkeys.js
function handleHotkey(l4, n2) {
  var a3, r2, c2, d2;
  if ("INPUT" === (null === (a3 = document.activeElement) || void 0 === a3 ? void 0 : a3.tagName) || "TEXTAREA" === (null === (r2 = document.activeElement) || void 0 === r2 ? void 0 : r2.tagName) || "true" === (null === (c2 = document.activeElement) || void 0 === c2 ? void 0 : c2.contentEditable)) {
    return;
  }
  const i2 = document.querySelector(".polotno-workspace-container");
  if (document.activeElement !== i2 && !(null == i2 ? void 0 : i2.contains(document.activeElement))) {
    const e6 = window.getSelection();
    if (e6 && e6.toString().length > 0) {
      return;
    }
  }
  const s3 = n2.selectedElements.filter((e6) => e6.removable).map((e6) => e6.id);
  46 !== l4.keyCode && 8 !== l4.keyCode || n2.deleteElements(s3);
  const u = l4.ctrlKey || l4.metaKey, v = l4.shiftKey;
  if (!u || v || "z" !== l4.key.toLowerCase() && "y" !== l4.key.toLowerCase() || (l4.preventDefault(), n2.history.undo()), u && v && ("z" === l4.key.toLowerCase() || "y" === l4.key.toLowerCase()) && (l4.preventDefault(), n2.history.redo()), u && "KeyA" === l4.code) {
    l4.preventDefault();
    const e6 = null === (d2 = n2.activePage) || void 0 === d2 ? void 0 : d2.children.filter((e7) => e7.selectable), t3 = (null == e6 ? void 0 : e6.map((e7) => e7.id)) || [];
    n2.selectElements(t3);
  }
  u && "KeyC" === l4.code && (l4.preventDefault(), copy(n2)), u && "KeyX" === l4.code && (l4.preventDefault(), cut(n2)), u && "KeyV" === l4.code && (l4.preventDefault(), paste(n2)), "ArrowDown" === l4.code && (l4.preventDefault(), n2.selectedShapes.forEach((e6) => {
    e6.draggable && e6.set({ y: e6.y + 1 });
  })), "ArrowUp" === l4.code && (l4.preventDefault(), n2.selectedShapes.forEach((e6) => {
    e6.draggable && e6.set({ y: e6.y - 1 });
  })), "ArrowLeft" === l4.code && (l4.preventDefault(), n2.selectedShapes.forEach((e6) => {
    e6.draggable && e6.set({ x: e6.x - 1 });
  })), "ArrowRight" === l4.code && (l4.preventDefault(), n2.selectedShapes.forEach((e6) => {
    e6.draggable && e6.set({ x: e6.x + 1 });
  }));
}

// node_modules/polotno/canvas/workspace-canvas.js
var l3 = ({ store: t3 }) => import_react3.default.createElement("div", { style: { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", textAlign: "center" } }, import_react3.default.createElement("p", null, t("workspace.noPages")), import_react3.default.createElement("button", { onClick: () => {
  t3.addPage();
} }, t("workspace.addPage")));
var s2 = ({ width: t3, height: r2, xPadding: n2, yPadding: o3, backgroundColor: i2 }) => import_react3.default.createElement("div", { style: { width: t3 + "px", height: r2 + "px", backgroundColor: i2, paddingLeft: n2 + "px", paddingRight: n2 + "px", paddingTop: o3 + "px", paddingBottom: o3 + "px" } }, import_react3.default.createElement("div", { style: { width: " 100%", height: "100%", backgroundColor: "white" } }));
var c = [4, 6];
var WorkspaceCanvas = observer(({ store: t3, pageControlsEnabled: a3, backgroundColor: u, pageBorderColor: d2, activePageBorderColor: h2, bleedColor: g, snapGuideStroke: p2, snapGuideStrokeWidth: f2, snapGuideDash: m2, selectionRectFill: v, selectionRectStroke: w, selectionRectStrokeWidth: b, transformLabelFill: k, transformLabelTextFill: E, distanceGuideStroke: x, distanceLabelFill: y, distanceLabelTextFill: P, components: T, onKeyDown: R, paddingX: L, paddingY: C, altCloneEnabled: M = true, visiblePagesOffset: S, renderOnlyActivePage: F }) => {
  var W;
  const O = null != L ? L : 20, _ = null != C ? C : 55, [G, j] = import_react3.default.useState({ width: 100, height: 100 }), z = import_react3.default.useRef(G), B = import_react3.default.useRef(null), H = import_react3.default.useRef(null), D = t3.bleedVisible ? Math.max(0, ...t3.pages.map((e6) => e6.bleed)) : 0, N = Math.max(...t3.pages.map((e6) => e6.computedWidth)), I = Math.max(...t3.pages.map((e6) => e6.computedHeight)), K = (null === (W = t3.activePage) || void 0 === W ? void 0 : W.computedHeight) || 0, Y = N + 2 * D, A = (F ? K : I) + 2 * D, V = async ({ skipTimeout: e6 } = { skipTimeout: false }) => {
    if (e6 || await new Promise((e7) => setTimeout(e7, 50)), null === B.current) {
      return;
    }
    const r2 = B.current.getBoundingClientRect();
    0 !== r2.width && 0 !== r2.height || (console.warn("Polotno warning: <Workspace /> component can not automatically detect its size.\nWidth or height of parent elements is equal 0.\nPlease make sure it has non-zero size. You may need to adjust it with your styles. <Workspace /> will automatically fit into parent container.\nFor simpler debugging here is the log of the parent element:"), console.log(B.current));
    const n2 = H.current.clientWidth || r2.width, o3 = { width: n2, height: r2.height };
    (z.current.width !== o3.width || z.current.height !== o3.height) && (j(o3), z.current = o3);
    const i2 = (n2 - 2 * O) / Y, a4 = t3.pages.length > 1 ? 3.1 : 2, l4 = (r2.height - _ * a4) / A, s3 = t3.pages.length ? Math.max(Math.min(i2, l4), 0.01) : 1;
    t3.scaleToFit !== s3 && (t3.setScale(s3), t3._setScaleToFit(s3));
  };
  import_react3.default.useLayoutEffect(() => {
    V({ skipTimeout: true });
  }, []), import_react3.default.useEffect(() => {
    V();
  }, [Y, A, C, L]), import_react3.default.useLayoutEffect(() => {
    V({ skipTimeout: true });
  }, [t3.openedSidePanel]), import_react3.default.useEffect(() => {
    t3.__();
  }, []), import_react3.default.useEffect(() => {
    const e6 = B.current;
    if (window.ResizeObserver) {
      const t4 = new ResizeObserver(() => {
        V({ skipTimeout: true });
      });
      return t4.observe(e6), () => t4.unobserve(e6);
    }
    {
      const e7 = setInterval(() => {
        V({ skipTimeout: true });
      }, 100);
      return () => clearInterval(e7);
    }
  }, [Y, A]);
  const X = Math.max(O, (G.width - Y * t3.scale) / 2), q = F ? 1 : t3.pages.length, J = A * t3.scale * q, Q = Math.max(_, (G.height - J) / q / 2);
  import_react3.default.useEffect(() => {
    const e6 = (e7) => {
      (R || handleHotkey)(e7, t3);
    };
    return window.addEventListener("keydown", e6), () => window.removeEventListener("keydown", e6);
  }, []), import_react3.default.useEffect(() => {
    var e6;
    const r2 = (e7) => {
      if (e7.ctrlKey || e7.metaKey) {
        e7.preventDefault();
        const i2 = Math.max(5, t3.scaleToFit), a4 = Math.min(0.1, t3.scaleToFit), l4 = 0.03, s3 = (r3 = e7.deltaY < 0 ? t3.scale * (1 + l4) : t3.scale / (1 + l4), n2 = a4, o3 = i2, Math.max(n2, Math.min(o3, r3)));
        return void t3.setScale(s3);
      }
      var r3, n2, o3;
    };
    return null === (e6 = H.current) || void 0 === e6 || e6.addEventListener("wheel", r2), () => {
      var e7;
      return null === (e7 = H.current) || void 0 === e7 ? void 0 : e7.removeEventListener("wheel", r2);
    };
  }, []);
  const U = import_react3.default.useRef(false);
  ((t4, r2, n2, o3, i2, a4) => {
    const l4 = import_react3.default.useRef({ width: r2, height: n2 }), s3 = import_react3.default.useRef({ top: 0, left: 0 }), c2 = import_react3.default.useRef(false), u2 = import_react3.default.useRef(i2.pages.length);
    c2.current = u2.current !== i2.pages.length, u2.current = i2.pages.length, import_react3.default.useEffect(() => {
      const e6 = t4.current, r3 = (t5) => {
        s3.current = { top: e6.scrollTop, left: e6.scrollLeft };
      };
      return e6.addEventListener("scroll", r3), () => {
        e6.removeEventListener("scroll", r3);
      };
    }, []), import_react3.default.useLayoutEffect(() => {
      if (!t4.current) {
        return;
      }
      if (c2.current) {
        return;
      }
      const e6 = t4.current, o4 = (s3.current.left + e6.offsetWidth / 2) / l4.current.width, i3 = (s3.current.top + e6.offsetHeight / 2) / l4.current.height;
      a4.current = true, e6.scrollLeft = o4 * r2 - e6.offsetWidth / 2, e6.scrollTop = i3 * n2 - e6.offsetHeight / 2, l4.current = { width: r2, height: n2 };
    }, [o3, r2, n2]);
  })(H, Y * t3.scale + 2 * X, A * t3.scale + 2 * Q, t3.scale, t3, U);
  const { handleScroll: Z } = ((t4, r2, n2, o3, i2, a4) => {
    const l4 = import_react3.default.useRef(false), s3 = import_react3.default.useRef(null), c2 = import_react3.default.useRef(false);
    import_react3.default.useEffect(() => {
      const e6 = t4.current, r3 = () => {
        i2.current;
      };
      return e6.addEventListener("scroll", r3), () => {
        e6.removeEventListener("scroll", r3);
      };
    }, []);
    const u2 = n2.pages.indexOf(n2.activePage);
    return import_react3.default.useLayoutEffect(() => {
      if (a4) {
        return;
      }
      if (!n2.activePage) {
        return;
      }
      if (!t4.current) {
        return;
      }
      if (l4.current) {
        return;
      }
      const e6 = t4.current, o4 = n2.pages.indexOf(n2.activePage) * r2;
      let i3 = () => {
      };
      return (Math.abs(o4 - e6.scrollTop) > 0.5 * r2 || c2.current) && (c2.current = true, i3 = (({ element: e7, scrollTop: t5 = 0, duration: r3 = 300, onFinish: n3 = () => {
      } }) => {
        const o5 = e7.scrollTop, i4 = t5 - o5;
        let a5 = 0, l5 = false;
        if (0 === r3) {
          return e7.scrollTop = t5, () => {
          };
        }
        const s4 = () => {
          if (l5) {
            return;
          }
          a5 += 20;
          const t6 = c3(a5, o5, i4, r3);
          e7.scrollTop = t6, a5 < r3 ? setTimeout(s4, 20) : n3();
        }, c3 = (e8, t6, r4, n4) => (e8 /= n4 / 2) < 1 ? r4 / 2 * e8 * e8 + t6 : -r4 / 2 * (--e8 * (e8 - 2) - 1) + t6;
        return s4(), () => {
          l5 = true;
        };
      })({ element: e6, scrollTop: o4, onFinish: () => {
        c2.current = false;
      }, duration: n2.isPlaying ? 0 : 300 })), i3;
    }, [n2.activePage, u2, n2.isPlaying, a4]), { handleScroll: (e6) => {
      if (a4) {
        return;
      }
      if (c2.current) {
        return;
      }
      l4.current = true, clearTimeout(s3.current), s3.current = setTimeout(() => {
        l4.current = false;
      }, 300);
      const t5 = e6.currentTarget.childNodes[0].offsetHeight, r3 = e6.currentTarget.scrollTop, i3 = Math.floor((r3 + o3.height / 3) / t5), u3 = n2.pages[i3];
      u3 && n2.activePage !== u3 && u3.select();
    } };
  })(H, A * t3.scale + 2 * Q, t3, G, U, F), $ = G.width >= Y * t3.scale + 2 * X, ee = u || "rgba(232, 232, 232, 0.9)", te = t3.pages.indexOf(t3.activePage), re = (null == T ? void 0 : T.NoPages) || l3, ne = null != S ? S : Math.min(3, Math.max(1, Math.ceil(G.height / 2 / (A * t3.scale))));
  return import_react3.default.createElement("div", { ref: B, style: { width: "100%", height: "100%", position: "relative", outline: "none", flex: 1, backgroundColor: ee, overflow: "hidden" }, tabIndex: 0, className: "polotno-workspace-container" }, import_react3.default.createElement("div", { ref: H, onScroll: Z, style: { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", overflow: "auto", overflowX: $ ? "hidden" : "auto" }, className: "polotno-workspace-inner" }, t3.pages.map((n2, o3) => {
    const i2 = n2 === t3.activePage;
    if (F && !i2 && !n2._exportingOrRendering && !n2._forceMount) {
      return null;
    }
    if (!(Math.abs(o3 - te) <= ne || n2._exportingOrRendering || n2._forceMount)) {
      return import_react3.default.createElement(s2, { key: n2.id, width: Y * t3.scale + 2 * X, height: A * t3.scale + 2 * Q, backgroundColor: ee, xPadding: X, yPadding: Q });
    }
    const l4 = import_react3.default.createElement(page_default, { key: n2.id, page: n2, xPadding: X, yPadding: Q, width: Y * t3.scale + 2 * X, height: A * t3.scale + 2 * Q, store: t3, pageControlsEnabled: a3, backColor: ee, pageBorderColor: d2 || "lightgrey", activePageBorderColor: h2 || "rgb(0, 161, 255)", altCloneEnabled: M, bleedColor: g || "rgba(255, 0, 0, 0.1)", selectionRectFill: v, selectionRectStroke: w, selectionRectStrokeWidth: b, snapGuideStroke: p2 || "rgb(0, 161, 255)", snapGuideStrokeWidth: f2 || 1, snapGuideDash: m2 || c, transformLabelFill: k, transformLabelTextFill: E, distanceGuideStroke: x || "rgb(0, 161, 255)", distanceLabelFill: y || "rgb(0, 161, 255)", distanceLabelTextFill: P || "white", components: T, viewportSize: G });
    return (n2._exportingOrRendering || n2._forceMount) && !i2 && F ? import_react3.default.createElement("div", { style: { display: "none" }, key: n2.id }, l4) : l4;
  }), t3.rulesVisible && import_react3.default.createElement(TopRules, { store: t3, xPadding: X, yPadding: Q, width: Y * t3.scale + 2 * X, height: A * t3.scale + 2 * Q }), 0 === t3.pages.length && import_react3.default.createElement(re, { store: t3 }), t3.audios.map((r2) => import_react3.default.createElement(AudioElement, { key: r2.id, audio: r2, store: t3 }))));
});

// node_modules/polotno/canvas/page-controls.js
var import_react4 = __toESM(require_react(), 1);
var PageControls = observer(({ store: t3, page: d2, xPadding: s3, yPadding: p2 }) => {
  const g = t3.pages.length > 1, u = t3.pages.indexOf(d2);
  return import_react4.default.createElement("div", { style: { position: "absolute", top: p2 - 40 + "px", right: s3 + "px" } }, g && import_react4.default.createElement(Tooltip, { content: t("workspace.moveUp"), disabled: 0 === u }, import_react4.default.createElement(Button, { icon: import_react4.default.createElement(ChevronUp, null), minimal: true, disabled: 0 === u, onClick: () => {
    d2.setZIndex(u - 1);
  } })), g && import_react4.default.createElement(Tooltip, { content: t("workspace.moveDown"), disabled: u === t3.pages.length - 1 }, import_react4.default.createElement(Button, { icon: import_react4.default.createElement(ChevronDown, null), minimal: true, disabled: u === t3.pages.length - 1, onClick: () => {
    const e6 = t3.pages.indexOf(d2);
    d2.setZIndex(e6 + 1);
  } })), import_react4.default.createElement(Tooltip, { content: t("workspace.duplicatePage") }, import_react4.default.createElement(Button, { icon: import_react4.default.createElement(Duplicate, null), minimal: true, onClick: () => {
    d2.clone();
  } })), g && import_react4.default.createElement(Tooltip, { content: t("workspace.removePage") }, import_react4.default.createElement(Button, { icon: import_react4.default.createElement(Trash, null), minimal: true, onClick: () => {
    t3.deletePages([d2.id]);
  } })), import_react4.default.createElement(Tooltip, { content: t("workspace.addPage") }, import_react4.default.createElement(Button, { icon: import_react4.default.createElement(Insert, null), minimal: true, onClick: () => {
    var e6, n2, l4;
    const a3 = t3.addPage({ bleed: (null === (e6 = t3.activePage) || void 0 === e6 ? void 0 : e6.bleed) || 0, width: (null === (n2 = t3.activePage) || void 0 === n2 ? void 0 : n2.width) || "auto", height: (null === (l4 = t3.activePage) || void 0 === l4 ? void 0 : l4.height) || "auto" }), i2 = t3.pages.indexOf(d2);
    a3.setZIndex(i2 + 1);
  } })));
});

// node_modules/polotno/canvas/tooltip.js
var import_react5 = __toESM(require_react(), 1);
function m(e6, t3) {
  return e6.classList.contains(t3) ? e6 : e6.parentElement ? m(e6.parentElement, t3) : null;
}
var f = () => null;
var Tooltip2 = observer(({ store: t3, page: p2, components: v, stageRef: h2 }) => {
  var g, E, b;
  const k = t3.selectedShapes.every((e6) => e6.page === p2), w = import_react5.default.useRef(null), [y, x] = import_react5.default.useState(false), C = t3._hasCroppedImages;
  t3.selectedElements.length, import_react5.default.useEffect(() => {
    var e6, t4, n2;
    const o3 = () => {
      x(true);
    }, r2 = () => {
      x(false);
    };
    null === (e6 = null == h2 ? void 0 : h2.current) || void 0 === e6 || e6.on("dragstart", o3), null === (t4 = null == h2 ? void 0 : h2.current) || void 0 === t4 || t4.on("dragend", r2);
    const l4 = null === (n2 = null == h2 ? void 0 : h2.current) || void 0 === n2 ? void 0 : n2.findOne("Transformer");
    return null == l4 || l4.on("transformstart", o3), null == l4 || l4.on("transformend", r2), () => {
      var e7, t5;
      null === (e7 = null == h2 ? void 0 : h2.current) || void 0 === e7 || e7.off("dragstart", o3), null === (t5 = null == h2 ? void 0 : h2.current) || void 0 === t5 || t5.off("dragend", r2), null == l4 || l4.off("transformstart", o3), null == l4 || l4.off("transformend", r2);
    };
  }, []);
  const [I, j] = import_react5.default.useState({ fit: true, needCalculate: false, token: Math.random() });
  function N() {
    if (!w.current) {
      return;
    }
    if (!I.needCalculate) {
      return;
    }
    const e6 = m(w.current, "polotno-workspace-container");
    if (!e6) {
      return;
    }
    const t4 = e6.getBoundingClientRect(), n2 = w.current.getBoundingClientRect(), o3 = (n2.right, t4.left, n2.top - t4.top), r2 = (n2.left, t4.left, n2.bottom - t4.top);
    o3 < 20 && I.fit ? j({ fit: false, needCalculate: false, token: I.token }) : r2 - t4.height > -20 && !I.fit ? j({ fit: true, needCalculate: false, token: I.token }) : j({ fit: I.fit, needCalculate: false, token: I.token });
  }
  if (import_react5.default.useEffect(() => {
    0 !== t3.selectedElements.length && j({ fit: true, needCalculate: true, token: Math.random() });
  }, [t3.selectedElements, y]), import_react5.default.useLayoutEffect(() => {
    const e6 = setTimeout(() => {
      N();
    }, 100);
    return () => {
      clearTimeout(e6);
    };
  }, [I.needCalculate, w.current, I.token]), import_react5.default.useEffect(() => {
    if (!h2.current) {
      return;
    }
    const e6 = m(h2.current.content, "polotno-workspace-inner");
    if (!e6) {
      return;
    }
    const n2 = () => {
      t3.selectedElements.length && j({ fit: true, needCalculate: true, token: Math.random() });
    };
    return null == e6 || e6.addEventListener("scroll", n2), () => {
      null == e6 || e6.removeEventListener("scroll", n2);
    };
  }, []), 0 === t3.selectedShapes.length) {
    return null;
  }
  if (y) {
    return null;
  }
  if (!k) {
    return null;
  }
  if (t3.activePage !== p2) {
    return null;
  }
  if (C) {
    return null;
  }
  const T = getTotalClientRect(t3.selectedShapes), O = (null == v ? void 0 : v.Position) || PositionPicker, R = (null == v ? void 0 : v.Duplicate) || DuplicateButton, S = (null == v ? void 0 : v.Remove) || RemoveButton, M = (null == v ? void 0 : v.Group) || GroupButton, Y = (null == v ? void 0 : v.Lock) || f, B = null === (g = t3.selectedElements[0]) || void 0 === g ? void 0 : g.type, F = Object.assign({ TextAiWrite }, v), L = extendToolbar({ components: F, type: B, usedItems: [] }), P = (null === (b = null === (E = null == h2 ? void 0 : h2.current) || void 0 === E ? void 0 : E.findOne("Transformer")) || void 0 === b ? void 0 : b.rotation()) || 0;
  let X = 30;
  return Math.abs(P) < 30 && I.fit && (X = 80), Math.abs(P) > 140 && !I.fit && (X = 80), import_react5.default.createElement(Html, { parentNodeFunc: ({ stage: e6 }) => {
    var t4, n2;
    return (null === (t4 = null == e6 ? void 0 : e6.container()) || void 0 === t4 ? void 0 : t4.closest(".polotno-workspace-container")) || (null === (n2 = null == e6 ? void 0 : e6.container()) || void 0 === n2 ? void 0 : n2.parentNode);
  }, transformFunc: (e6) => {
    var t4;
    const n2 = T.x + T.width / 2, o3 = I.fit ? T.y * e6.scaleY - X : T.y * e6.scaleY + T.height * e6.scaleY + X, r2 = null === (t4 = null == h2 ? void 0 : h2.current) || void 0 === t4 ? void 0 : t4.container(), l4 = (null == r2 ? void 0 : r2.getBoundingClientRect()) || { left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0, x: 0, y: 0, toJSON: () => ({}) }, i2 = null == r2 ? void 0 : r2.closest(".polotno-workspace-container"), s3 = (null == i2 ? void 0 : i2.getBoundingClientRect()) || { left: 0, top: 0, width: Number.POSITIVE_INFINITY, height: Number.POSITIVE_INFINITY, right: 0, bottom: 0, x: 0, y: 0, toJSON: () => ({}) }, a3 = l4.left - s3.left, u = l4.top - s3.top;
    let c2 = a3 + e6.x + n2 * e6.scaleX, d2 = c2 - T.width * e6.scaleX / 2, m2 = c2 + T.width * e6.scaleX / 2;
    const f2 = Math.min(50, T.width / 2 * e6.scaleX), p3 = m2 >= f2 && d2 <= s3.width - f2, v2 = w.current ? w.current.getBoundingClientRect().width : 0;
    if (Number.isFinite(s3.width) && v2 > 0 && p3) {
      const e7 = 8 + v2 / 2, t5 = s3.width - 8 - v2 / 2;
      t5 >= e7 && (c2 = Math.max(e7, Math.min(c2, t5)));
    }
    return m2 < f2 && (c2 -= v2 + 8), d2 > s3.width - f2 && (c2 += v2 + 8), Object.assign(Object.assign({}, e6), { x: c2, y: u + e6.y + o3, scaleX: 1, scaleY: 1 });
  }, divProps: { style: { pointerEvents: "none", position: "absolute", visibility: I.needCalculate ? "hidden" : "visible", zIndex: 9 } } }, import_react5.default.createElement("div", { ref: (e6) => {
    w.current = e6, !w.current && e6 && N();
  }, style: { pointerEvents: "none" } }, import_react5.default.createElement(Navbar, { style: { padding: "2px", borderRadius: "5px", height: "34px", transform: "translate(-50%, -50%)", pointerEvents: "auto" } }, import_react5.default.createElement(NavbarGroup, { style: { height: "30px" } }, L.map((n2) => {
    const o3 = F[n2];
    return import_react5.default.createElement(o3, { elements: t3.selectedElements, element: t3.selectedElements[0], store: t3, key: n2 });
  }), import_react5.default.createElement(M, { store: t3 }), import_react5.default.createElement(Y, { store: t3 }), import_react5.default.createElement(R, { store: t3 }), import_react5.default.createElement(S, { store: t3 }), import_react5.default.createElement(O, { store: t3 })))));
});

// node_modules/polotno/canvas/context-menu/context-menu.js
var import_react6 = __toESM(require_react(), 1);
var ContextMenu = observer(({ store: e6, isOpen: k, offset: g, setIsOpen: C }) => {
  var M, j, D, h2;
  const { disabled: y, duplicate: w } = useDuplicateElement({ store: e6 }), { disabled: O, remove: B } = useRemoveElement({ store: e6 }), { setElementToCopy: T } = useCopyStyle(e6), { disabled: I, lock: U, locked: F } = useLock({ store: e6 }), q = F ? import_react6.default.createElement(Lock, null) : import_react6.default.createElement(Unlock, null), z = e6.selectedElementsIds;
  return 0 === e6.selectedElements.length ? null : import_react6.default.createElement(ContextMenuPopover, { isOpen: k, onClose: () => {
    C(false);
  }, content: import_react6.default.createElement(Menu, null, import_react6.default.createElement(MenuItem, { shouldDismissPopover: false, icon: q, text: t(F ? "contextMenu.unlock" : "contextMenu.lock"), onClick: U, disabled: I }), import_react6.default.createElement(MenuItem, { icon: import_react6.default.createElement(Duplicate, null), text: t("contextMenu.duplicate"), onClick: w, disabled: y }), import_react6.default.createElement(MenuItem, { icon: import_react6.default.createElement(Trash, null), text: t("contextMenu.remove"), onClick: B, disabled: O }), import_react6.default.createElement(MenuDivider, null), import_react6.default.createElement(MenuItem, { icon: import_react6.default.createElement(Layers, null), text: t("toolbar.layering") }, import_react6.default.createElement(MenuItem, { shouldDismissPopover: false, icon: import_react6.default.createElement(DoubleChevronUp, null), text: t("toolbar.toForward"), disabled: !(null === (M = e6.activePage) || void 0 === M ? void 0 : M.canMoveElementsTop(z)), onClick: () => {
    var t3;
    null === (t3 = e6.activePage) || void 0 === t3 || t3.moveElementsTop(z);
  } }), import_react6.default.createElement(MenuItem, { shouldDismissPopover: false, icon: import_react6.default.createElement(ChevronUp, null), text: t("toolbar.up"), disabled: !(null === (j = e6.activePage) || void 0 === j ? void 0 : j.canMoveElementsUp(z)), onClick: () => {
    var t3;
    null === (t3 = e6.activePage) || void 0 === t3 || t3.moveElementsUp(z);
  } }), import_react6.default.createElement(MenuItem, { shouldDismissPopover: false, icon: import_react6.default.createElement(ChevronDown, null), text: t("toolbar.down"), disabled: !(null === (D = e6.activePage) || void 0 === D ? void 0 : D.canMoveElementsDown(z)), onClick: () => {
    var t3;
    null === (t3 = e6.activePage) || void 0 === t3 || t3.moveElementsDown(z);
  } }), import_react6.default.createElement(MenuItem, { shouldDismissPopover: false, icon: import_react6.default.createElement(DoubleChevronDown, null), text: t("toolbar.toBottom"), disabled: !(null === (h2 = e6.activePage) || void 0 === h2 ? void 0 : h2.canMoveElementsBottom(z)), onClick: () => {
    var t3;
    null === (t3 = e6.activePage) || void 0 === t3 || t3.moveElementsBottom(z);
  } }))), targetOffset: { top: g.y, left: g.x } });
});

// node_modules/polotno/canvas/workspace.js
var o2 = function(o3, t3) {
  var e6 = {};
  for (var r2 in o3) {
    Object.prototype.hasOwnProperty.call(o3, r2) && t3.indexOf(r2) < 0 && (e6[r2] = o3[r2]);
  }
  if (null != o3 && "function" == typeof Object.getOwnPropertySymbols) {
    var n2 = 0;
    for (r2 = Object.getOwnPropertySymbols(o3); n2 < r2.length; n2++) {
      t3.indexOf(r2[n2]) < 0 && Object.prototype.propertyIsEnumerable.call(o3, r2[n2]) && (e6[r2[n2]] = o3[r2[n2]]);
    }
  }
  return e6;
};
var Workspace = (l4) => {
  var s3, c2, a3, { components: i2 } = l4, m2 = o2(l4, ["components"]);
  return (i2 = i2 || {}).PageControls = null !== (s3 = i2.PageControls) && void 0 !== s3 ? s3 : PageControls, i2.Tooltip = null !== (c2 = i2.Tooltip) && void 0 !== c2 ? c2 : Tooltip2, i2.ContextMenu = null !== (a3 = i2.ContextMenu) && void 0 !== a3 ? a3 : ContextMenu, import_react7.default.createElement(WorkspaceCanvas, Object.assign({}, m2, { components: i2 }));
};
var workspace_default = Workspace;

export {
  Workspace,
  workspace_default
};
//# sourceMappingURL=chunk-7KOF4DNT.js.map
