import{observer as e}from"mobx-react-lite";import{ContextMenuPopover as t,Menu as o,MenuDivider as l,MenuItem as n}from"@blueprintjs/core";import r from"react";import{t as i}from"../../utils/l10n.js";import{useDuplicateElement as a}from"../../toolbar/use-duplicate-element.js";import{ChevronDown as s,ChevronUp as c,DoubleChevronDown as m,DoubleChevronUp as d,Duplicate as u,Layers as v,Lock as p,Trash as E,Unlock as b}from"@blueprintjs/icons";import{useRemoveElement as x}from"../../toolbar/use-remove-element.js";import{useCopyStyle as f}from"../../toolbar/use-copy-style.js";import{useLock as P}from"../../toolbar/use-lock.js";export const ContextMenu=e(({store:e,isOpen:k,offset:g,setIsOpen:C})=>{var M,j,D,h;const{disabled:y,duplicate:w}=a({store:e}),{disabled:O,remove:B}=x({store:e}),{setElementToCopy:T}=f(e),{disabled:I,lock:U,locked:F}=P({store:e}),q=F?r.createElement(p,null):r.createElement(b,null),z=e.selectedElementsIds;return 0===e.selectedElements.length?null:r.createElement(t,{isOpen:k,onClose:()=>{C(!1)},content:r.createElement(o,null,r.createElement(n,{shouldDismissPopover:!1,icon:q,text:i(F?"contextMenu.unlock":"contextMenu.lock"),onClick:U,disabled:I}),r.createElement(n,{icon:r.createElement(u,null),text:i("contextMenu.duplicate"),onClick:w,disabled:y}),r.createElement(n,{icon:r.createElement(E,null),text:i("contextMenu.remove"),onClick:B,disabled:O}),r.createElement(l,null),r.createElement(n,{icon:r.createElement(v,null),text:i("toolbar.layering")},r.createElement(n,{shouldDismissPopover:!1,icon:r.createElement(d,null),text:i("toolbar.toForward"),disabled:!(null===(M=e.activePage)||void 0===M?void 0:M.canMoveElementsTop(z)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsTop(z)}}),r.createElement(n,{shouldDismissPopover:!1,icon:r.createElement(c,null),text:i("toolbar.up"),disabled:!(null===(j=e.activePage)||void 0===j?void 0:j.canMoveElementsUp(z)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsUp(z)}}),r.createElement(n,{shouldDismissPopover:!1,icon:r.createElement(s,null),text:i("toolbar.down"),disabled:!(null===(D=e.activePage)||void 0===D?void 0:D.canMoveElementsDown(z)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsDown(z)}}),r.createElement(n,{shouldDismissPopover:!1,icon:r.createElement(m,null),text:i("toolbar.toBottom"),disabled:!(null===(h=e.activePage)||void 0===h?void 0:h.canMoveElementsBottom(z)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsBottom(z)}}))),targetOffset:{top:g.y,left:g.x}})});