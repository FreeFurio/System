import e from"react";import{Button as t}from"@blueprintjs/core";import{Cross as i}from"@blueprintjs/icons";import{observer as l}from"mobx-react-lite";import{ImagesGrid as r}from"./images-grid.js";import{svgToURL as o}from"../utils/svg.js";import{figureToSvg as s,TYPES as n}from"../utils/figure-to-svg.js";import m from"../utils/styled.js";import{t as a}from"../utils/l10n.js";const c=Object.keys(n),p=[{width:300,height:300,fill:"lightgray",stroke:"#0c0c0c",strokeWidth:0,url:""}],d=[];c.forEach(e=>{p.forEach(t=>{d.push(Object.assign({subType:e},t))})}),d.forEach(e=>{e.url=o(s(e))});const u=m("div")`
  height: 220px;
`;export const ImageClipPanel=l(({store:l})=>{const o=Math.ceil(d.length/4)||1,s=()=>l.selectedElements.map(e=>e.id).join(","),n=e.useMemo(s,[]),m=s();return e.useEffect(()=>{n!==m&&l.openSidePanel(l.previousOpenedSidePanel)},[n,m]),e.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"auto"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("h3",{style:{margin:0,lineHeight:"30px"}},a("sidePanel.clipImage")),e.createElement(t,{minimal:!0,icon:e.createElement(i,null),onClick:()=>l.openSidePanel(l.previousOpenedSidePanel)})),e.createElement(u,{style:{height:110*o+"px"}},e.createElement(r,{shadowEnabled:!1,rowsNumber:4,images:d,getPreview:e=>e.url,isLoading:!1,itemHeight:100,onSelect:async(e,t,i)=>{(i?[i]:l.selectedElements).forEach(t=>{("image"===t.type||"video"===t.type)&&t.contentEditable&&t.set({clipSrc:e.url})})}})))});