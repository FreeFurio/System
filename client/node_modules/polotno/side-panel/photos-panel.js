import e from"react";import{InputGroup as t}from"@blueprintjs/core";import{Search as r}from"@blueprintjs/icons";import{ImagesGrid as l}from"./images-grid.js";import{useInfiniteAPI as o}from"../utils/use-api.js";import{t as a}from"../utils/l10n.js";import{unsplashList as s,unsplashDownload as n}from"../utils/api.js";import{selectImage as m}from"./select-image.js";export const PhotosPanel=({store:i})=>{const{setQuery:u,loadMore:p,isReachingEnd:c,data:h,isLoading:g,error:d}=o({defaultQuery:"",getAPI:({page:e,query:t})=>s({page:e,query:t})});return e.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},e.createElement(t,{leftIcon:e.createElement(r,null),placeholder:a("sidePanel.searchPlaceholder"),onChange:e=>{u(e.target.value)},type:"search",style:{marginBottom:"20px"}}),e.createElement("p",{style:{textAlign:"center"}},"Photos by"," ",e.createElement("a",{href:"https://unsplash.com/",target:"_blank"},"Unsplash")),e.createElement(l,{images:null==h?void 0:h.map(e=>e.results).flat().filter(Boolean),getPreview:e=>e.urls.small,onSelect:async(e,t,r)=>{fetch(n(e.id)),m({src:e.urls.regular,store:i,droppedPos:t,targetElement:r})},isLoading:g,error:d,loadMore:!c&&p,getCredit:t=>e.createElement("span",null,"Photo by"," ",e.createElement("a",{href:`https://unsplash.com/@${t.user.username}?utm_source=polotno&utm_medium=referral`,target:"_blank"},t.user.name)," ","on"," ",e.createElement("a",{href:"https://unsplash.com/?utm_source=polotno&utm_medium=referral",target:"_blank"},"Unsplash"))}))};