import e from"react";import{InputGroup as t}from"@blueprintjs/core";import{useInfiniteAPI as r}from"../utils/use-api.js";import{t as o}from"../utils/l10n.js";import{selectVideo as l}from"./select-video.js";import{getKey as a}from"../utils/validate-key.js";import{observer as i}from"mobx-react-lite";import{VideosGrid as s}from"./videos-grid.js";import{Search as n}from"@blueprintjs/icons";export const VideosPanel=i(({store:i})=>{const{setQuery:p,loadMore:m,isReachingEnd:c,data:d,isLoading:u,error:f}=r({defaultQuery:"",getAPI:({page:e,query:t})=>(({query:e,page:t})=>`https://api.polotno.com/api/pexels/videos/${e?"search":"popular"}?query=${e}&per_page=20&page=${t}&KEY=${a()}`)({page:e,query:t}),getSize:e=>e.total_results/e.per_page});return e.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},e.createElement(t,{leftIcon:e.createElement(n,null),placeholder:o("sidePanel.searchPlaceholder"),onChange:e=>{p(e.target.value)},type:"search",style:{marginBottom:"20px"}}),e.createElement("p",{style:{textAlign:"center"}},"Videos by"," ",e.createElement("a",{href:"https://www.pexels.com/",target:"_blank"},"Pexels")),e.createElement(s,{items:null==d?void 0:d.map(e=>e.videos).flat().filter(Boolean),onSelect:async(e,t,r)=>{var o;const a=(null===(o=e.video_files.find(e=>"hd"===e.quality))||void 0===o?void 0:o.link)||e.video_files[0].link;l({src:a,store:i,droppedPos:t,targetElement:r,attrs:{width:e.width,height:e.height}})},isLoading:u,error:f,loadMore:!c&&m,getCredit:t=>e.createElement("span",null,"Video by"," ",e.createElement("a",{href:t.user.url,target:"_blank",rel:"noreferrer"},t.user.name)," ","on"," ",e.createElement("a",{href:"https://pexels.com/?utm_source=polotno&utm_medium=referral",target:"_blank",rel:"noreferrer noopener"},"Pexels"))}))});