import e from"react";import{observer as t}from"mobx-react-lite";import{Button as r,Position as i,Slider as n}from"@blueprintjs/core";import{Disable as o}from"@blueprintjs/icons";import{Popover as s}from"@blueprintjs/core";import l from"@meronex/icons/zo/ZoStrokeWidth.js";import a from"./color-picker.js";import{AnimationsPicker as m}from"./animations-picker.js";import{NumberInput as h,FiltersPicker as c}from"./filters-picker.js";import{ElementContainer as d,extendToolbar as g}from"./element-container.js";import{t as u}from"../utils/l10n.js";import{flags as p}from"../utils/flags.js";export const FigureFill=t(({elements:t,store:r})=>e.createElement(a,{value:t[0].fill,style:{marginRight:"5px"},gradientEnabled:!0,onChange:e=>r.history.transaction(()=>{t.forEach(t=>{t.set({fill:e})})}),store:r}));export const FigureSettings=t(({store:t,elements:a,element:m})=>{const c=e=>{t.history.transaction(()=>{a.forEach(t=>{t.set(e)})})};return e.createElement(s,{content:e.createElement("div",{style:{padding:"15px",paddingTop:"15px",width:"270px"}},e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"15px"}},e.createElement(r,{onClick:()=>{c({strokeWidth:0})},active:0===a[0].strokeWidth,style:{width:"44px",height:"34px"},icon:e.createElement(o,{size:20})}),e.createElement(r,{onClick:()=>{c({dash:[],strokeWidth:a[0].strokeWidth||10})},active:a[0].strokeWidth&&0===a[0].dash.length},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("line",{x2:"24",y1:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2"}))),e.createElement(r,{onClick:()=>{c({dash:[4,1],strokeWidth:a[0].strokeWidth||10})},active:a[0].strokeWidth&&4===a[0].dash[0]},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("line",{x1:"-1",x2:"25",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"12 2",strokeWidth:"2"}))),e.createElement(r,{onClick:()=>{c({dash:[2,1],strokeWidth:a[0].strokeWidth||10})},active:a[0].strokeWidth&&2===a[0].dash[0]},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("line",{x1:"1",x2:"23",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"6 2",strokeWidth:"2"}))),e.createElement(r,{onClick:()=>{c({dash:[1,1],strokeWidth:a[0].strokeWidth||10})},active:a[0].strokeWidth&&1===a[0].dash[0]},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("line",{x1:"1",x2:"23",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"2 2",strokeWidth:"2"})))),e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"5px"}},e.createElement("div",null,u("toolbar.strokeWidth")),e.createElement("div",null,e.createElement(h,{value:a[0].strokeWidth,onValueChange:e=>{c({strokeWidth:e})},style:{width:"50px"},min:0,max:Math.round(Math.min(m.width,m.height)/2),buttonPosition:"none"}))),e.createElement(n,{value:a[0].strokeWidth,onChange:e=>{c({strokeWidth:e})},min:0,max:Math.round(Math.min(m.width,m.height)/2),labelRenderer:!1}),"rect"===m.subType&&e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"15px",paddingBottom:"5px"}},e.createElement("div",null,u("toolbar.cornerRadius")),e.createElement("div",null,e.createElement(h,{value:a[0].cornerRadius,onValueChange:e=>{c({cornerRadius:e})},style:{width:"50px"},min:0,max:Math.round(Math.max(m.width,m.height)/2),buttonPosition:"none"}))),e.createElement(n,{value:a[0].cornerRadius,onChange:e=>{c({cornerRadius:e})},min:0,max:Math.round(Math.max(m.width,m.height)/2),labelRenderer:!1}))),position:i.BOTTOM},e.createElement(r,{icon:e.createElement(l,null),minimal:!0}))});export const FigureStroke=t(({elements:t,store:r})=>t.find(e=>e.strokeWidth)?e.createElement(a,{value:t[0].stroke,style:{marginRight:"5px"},gradientEnabled:!1,onChange:e=>r.history.transaction(()=>{t.forEach(t=>{t.set({stroke:e})})}),store:r}):null);const k={FigureFill,FigureStroke,FigureSettings,FigureAnimations:m,FigureFilters:c};export const FigureToolbar=t(({store:t,components:r})=>{const i=t.selectedElements[0],n=["FigureFill","FigureStroke","FigureSettings","FigureFilters",p.animationsEnabled&&"FigureAnimations"].filter(e=>Boolean(e)),o=g({type:"figure",usedItems:n,components:r});return e.createElement(d,{items:o,itemRender:n=>{const o=r[n]||k[n];return e.createElement(o,{element:i,store:t,key:n,elements:t.selectedElements})}})});export default FigureToolbar;