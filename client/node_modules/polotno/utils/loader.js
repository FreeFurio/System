import{isAnimationUsed as e}from"../canvas/use-fadein.js";let o=0,t=[],r=3e4;export const setAssetLoadTimeout=e=>{r=e};export const getAssetLoadTimeout=()=>r;let n=6e3;export const setFontLoadTimeout=e=>{n=e};export const getFontLoadTimeout=()=>n;export function incrementLoader(e){o+=1;let t=!1,n=!1;const a=setTimeout(()=>{t||(triggerLoadError(`Timeout loading asset ${e}`),console.error("Timeout triggered for loader. Some assets may not have loaded.",e),t=!0,decrementLoader())},r);return()=>{n?console.error("Finish called twice! That is not expected. id: ",e):(n=!0,t||(clearTimeout(a),decrementLoader()))}}export function decrementLoader(){o-=1,0===o&&(t.forEach(e=>e()),t=[])}export function whenLoaded(){return new Promise(r=>{return n=()=>{e()?setTimeout(r,300):r(!0)},void(0===o?n():t.push(n));var n})}let a=[];export function onLoadError(e){a.push(e)}export function triggerLoadError(e){a.forEach(o=>o(e))}